import"./modulepreload-polyfill-3cfb730f.js";import{H as S}from"./handlebars-aa0ac26f.js";const p=`<li class="student-card" data-id="{{id}}">
  <div class="student-info">
    <p><strong>{{firstName}} {{lastName}}</strong></p>
    <p><em>Вік:</em> {{age}}</p>
    <p><em>Курс:</em> {{course}}</p>
    <p><em>Факультет:</em> {{faculty}}</p>
  </div>
  <div class="student-actions">
    <button class="edit-btn">Edit</button>
    <button class="delete-btn">Delete</button>
  </div>
</li>
`,E=S.compile(p);localStorage.getItem("studentsList")?console.log("Наявність даних у localStorage:",localStorage.getItem("studentsList")):(localStorage.setItem("studentsList","[]"),console.log("Початковий стан localStorage:",localStorage.getItem("studentsList")));let e=JSON.parse(localStorage.getItem("studentsList")),s=null,I=e.length?Math.max(...e.map(t=>t.id))+1:1;const c=document.getElementById("students-list"),r=document.getElementById("modal-form"),m=document.getElementById("modal-confirm"),l=document.getElementById("student-form"),L=document.getElementById("confirm-text"),b=document.getElementById("btn-confirm-yes"),y=document.getElementById("btn-add-student");i(e);y.addEventListener("click",N);l.addEventListener("submit",h);c.addEventListener("click",v);b.addEventListener("click",B);document.body.addEventListener("click",x);function N(){e=JSON.parse(localStorage.getItem("studentsList"))||[],console.log("Перед додаванням студента, dataArray:",e),A()}function h(t){t.preventDefault(),e=JSON.parse(localStorage.getItem("studentsList"))||[],console.log("Перед збереженням, dataArray:",e);const n=new FormData(l),o=Object.fromEntries(n.entries());if(o.age=Number(o.age),o.course=Number(o.course),s!==null){const d=e.findIndex(f=>f.id===s);e[d]={...e[d],...o},console.log("Відредаговано студента:",e[d]),s=null}else o.id=I++,e.push(o),console.log("Додано студента:",o);u(),i(e),a(r)}function v(t){if(t.target.classList.contains("edit-btn")||t.target.classList.contains("delete-btn"))console.log("Клік по картці студента (редагування / видалення)"),s=Number(t.target.parentNode.parentNode.dataset.id),console.log("editStudentId:",s);else return;e=JSON.parse(localStorage.getItem("studentsList")),console.log("Перед редагуванням/видаленням, dataArray:",e);const n=e.find(o=>o.id===s);t.target.classList.contains("edit-btn")&&(g("Редагування студента"),l.firstName.value=n.firstName,l.lastName.value=n.lastName,l.age.value=n.age,l.course.value=n.course,l.faculty.value=n.faculty),t.target.classList.contains("delete-btn")&&(console.log("Видалити картку студента"),L.textContent=`Видалити картку студента ${n.firstName}?`,a(m))}function B(){e=e.filter(t=>t.id!==s),console.log("editStudentId видалення:",s),u(),i(e),a(m)}function x(t){if(t.target.dataset.close!==void 0){const n=t.target.closest(".modal");a(n)}}function A(){g("Нова картка студента"),l.reset(),s=null,console.log("Відкрито форму для нового студента")}function u(){localStorage.setItem("studentsList",JSON.stringify(e,null,2))}function i(t){c.innerHTML="",console.log("Рендеримо dataArray:",t),t.forEach(n=>{c.insertAdjacentHTML("beforeend",E(n))})}function g(t){const n=document.getElementById("form-title");n.textContent=t,a(r)}function a(t){t.classList.toggle("hidden")}
