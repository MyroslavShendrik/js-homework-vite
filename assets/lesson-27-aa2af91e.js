import"./modulepreload-polyfill-3cfb730f.js";import{H as b}from"./handlebars-aa0ac26f.js";const I=`<li class="student-card" data-id="{{id}}">
  <div class="student-info">
    <p><strong>{{firstName}} {{lastName}}</strong></p>
    <p><em>Вік:</em> {{age}}</p>
    <p><em>Курс:</em> {{course}}</p>
    <p><em>Факультет:</em> {{faculty}}</p>
  </div>
  <div class="student-actions">
    <button class="edit-btn">Edit</button>
    <button class="delete-btn">Delete</button>
  </div>
</li>
`,L=b.compile(I);localStorage.getItem("studentsList")?console.log("Наявність даних у localStorage:",localStorage.getItem("studentsList")):(localStorage.setItem("studentsList","[]"),console.log("Початковий стан localStorage:",localStorage.getItem("studentsList")));let t=JSON.parse(localStorage.getItem("studentsList")),l;const c=document.getElementById("students-list"),i=document.getElementById("modal-form"),m=document.getElementById("modal-confirm"),s=document.getElementById("student-form"),y=document.getElementById("confirm-text"),p=document.getElementById("btn-confirm-yes"),N=document.getElementById("btn-add-student"),g=document.getElementById("form-title");u();r(t);N.addEventListener("click",v);s.addEventListener("submit",h);c.addEventListener("click",A);p.addEventListener("click",B);document.body.addEventListener("click",x);function v(){E(),console.log("Перед додаванням студента, dataArray:",t),g.textContent="Нова картка студента",s.reset();//! додати цю логіку в кінці роботи форми 
//! editStudentId = null;
console.log("Відкрито форму для нового студента"),a(i)}function h(e){e.preventDefault(),console.log("Перед збереженням, dataArray:",t);const n=new FormData(s),o=Object.fromEntries(n.entries());if(o.age=Number(o.age),o.course=Number(o.course),l!=null){const d=t.findIndex(S=>S.id===l);console.log("studentIndex:",d),d!==-1&&(t[d]={...t[d],...o},console.log("Відредаговано студента:",t[d]));//! editStudentId = null; // 
}else console.log("dataArray.length:",t.length),t.push(o),console.log("Додано студента:",o);u(),f(),r(t),a(i)}function A(e){if(e.target.classList.contains("edit-btn")||e.target.classList.contains("delete-btn"))console.log("Клік по картці студента (редагування / видалення)"),l=Number(e.target.closest(".student-card").dataset.id),console.log("editStudentId:",l);else return;E(),console.log("Перед редагуванням/видаленням, dataArray:",t);const n=t.find(o=>o.id===l);console.log("currentStudent:",n),e.target.classList.contains("edit-btn")&&(g.textContent="Редагування студента",a(i),s.firstName.value=n.firstName,s.lastName.value=n.lastName,s.age.value=n.age,s.course.value=n.course,s.faculty.value=n.faculty),e.target.classList.contains("delete-btn")&&(console.log("Видалити картку студента"),y.textContent=`Видалити картку студента ${n.firstName}?`,a(m))}function B(){t=t.filter(e=>e.id!==l),u(),console.log("editStudentId видалення:",l),f(),r(t),a(m)}function x(e){if(e.target.dataset.close!==void 0){const n=e.target.closest(".modal");a(n)}}function f(){localStorage.setItem("studentsList",JSON.stringify(t,null,2))}function E(){t=JSON.parse(localStorage.getItem("studentsList")),console.log("dataArray:",t)}function r(e){c.innerHTML="",console.log("Рендеримо dataArray:",e),e.forEach(n=>{c.insertAdjacentHTML("beforeend",L(n))})}function a(e){e.classList.toggle("hidden")}function u(){t=t.map((e,n)=>({...e,id:n}))}
